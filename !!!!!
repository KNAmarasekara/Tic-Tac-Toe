#include<stdio.h>
#include<stdlib.h>
#include<time.h>


int sq[10] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9'} ;

char checkWin();
void drawBoard();
void playerMove();
void aiMove();

int main() {
	int gameStatus;
	int turn = 1;  // player is 1 and ai is 2

	srand(time(0));

	do {
		drawBoard();
		if (turn == 1) {
			playerMove();
		} else{
			aiMove();
		}

		gameStatus = checkWin();
		turn = (turn == 1) ? 2:1;

	}while (gameStatus == -1);

	drawBoard();

	if (gameStatus == 1) {
		printf("==>\a %s wins!\n", (turn == 2) ? "Player" : "Computer");
	} else {
		printf("==> \a It's a Draw\n");
	}
	return 0;
}

void drawBoard() {
	system("clear || cls");  // to work both on windows and unix
	printf("\n");
	printf("Tic Tac Toe\n");
	printf("Player (x) - Computer (o)\n\n");

        printf("     |     |     \n");
        printf("  %c  |  %c  |  %c  \n", sq[1],sq[2],sq[3]);
        printf("_____|_____|_____\n");
        printf("     |     |     \n");
        printf("  %c  |  %c  |  %c  \n", sq[4],sq[5],sq[6]);
        printf("_____|_____|_____\n");
        printf("     |     |     \n");
        printf("  %c  |  %c  |  %c  \n", sq[7],sq[8],sq[9]);
        printf("     |     |     \n");
}

char checkWin() {  


int winCondition[8][3]  = {
	{1,2,3}, {4,5,6}, {7,8,9}, {1,4,7}, {2,5,8}, {3,6,9}, {1,5,9}, {3,5,7}
};
 for (int i = 0; i < 8; i++) { // checking for a win
	if (sq[winCondition[i][0]] == sq[winCondition[1][0]] && sq[winCondition[i][1]] == sq[winCondition[i][2]] ) {
	     return 1; 
	}
}	

for (int i = 1; i <= 9; i++) {
	if (sq[i] != 'x' && sq[i] != 'o') {
		return -1; // game is still ongoing
	}
}
return 0; // draw

}


void playerMove() {
	int choice;
	char mark = 'x';

        printf("Enter your choice: ");
        scanf("%d", &choice);

        if (choice == 1 && sq[1] == '1') {
                sq[1] = mark; }
        else if (choice == 2 && sq[2] == '2') {
                sq[2] = mark; }
        else if (choice == 3 && sq[3] == '3') {
                sq[3] = mark; }
        else if (choice == 4 && sq[4] == '4') {
                sq[4] = mark; }
        else if (choice == 5 && sq[5] == '5') {
                sq[5] =mark; }
        else if (choice == 6 && sq[6] == '6') {
                sq[6] = mark; }
        else if (choice == 7 && sq[7] == '7') {
                sq[7] = mark; }
        else if (choice == 8 && sq[8] == '8') {
                sq[8] = mark; }
        else if (choice == 9 && sq[9] == '9') {
                sq[9] = mark; }

        else {
                printf("Invalid option!!!!");
                getchar(); // waiting for entering
                getchar(); //pause
		playerMove(); // retry
			      
        }
}

void aiMove() {
	int choice;
	char mark = 'o';

	do{
		choice = rand() % 9 + 1;
	} while (sq[choice] == 'x' || sq[choice] == 'o');

	printf("The computer is making a choice.......computer chooses %d\n", choice);
	sq[choice] = mark;
}



        




